<!-- Chosen Palette: Vibrant Engineering (Indigo #4F46E5, Cyan #06B6D4, Fuchsia #D946EF, Slate Background) -->
<!-- Application Structure Plan: Diseño SPA "Mobile-First" optimizado para DidacMed.
    Cambios recientes:
    1. Etiqueta Hero: Solo "Ingeniería Biomédica".
    2. Footer: Marca simplificada a "DidacMed".
    3. CTA: Botón de WhatsApp actualizado con el número real (593989002712).
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. Charts rendered via Canvas/WebGL. -->

<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DidacMed - Firmware | Tecnología Biomédica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;500;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #F8FAFC; color: #0F172A; }
        
        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 400px; }
        }

        /* Mobile Scrollbar Hide */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Glassmorphism Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.07);
        }

        /* Animated Gradient Text */
        .text-gradient {
            background: linear-gradient(to right, #4F46E5, #D946EF, #06B6D4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: gradient 5s linear infinite;
        }
        @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* Flowchart Nodes */
        .flow-node {
            background: white;
            border-left: 4px solid #4F46E5;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }
        .flow-node:active { transform: scale(0.98); }
        
        .connector-v { width: 2px; height: 1rem; background-color: #cbd5e1; margin: 0 auto; }

        /* Active Link Style */
        .nav-link.active {
            color: #4F46E5;
            background-color: #EEF2FF;
        }
    </style>
</head>
<body class="antialiased selection:bg-fuchsia-200 selection:text-fuchsia-900">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-lg border-b border-slate-200/50 shadow-sm transition-all duration-300">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-tr from-indigo-600 to-fuchsia-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-indigo-500/30">D</div>
                    <span class="font-bold text-slate-800 tracking-tight">DidacMed</span>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-1 text-sm font-semibold text-slate-500" id="desktop-menu">
                    <a href="#resumen" class="nav-link px-3 py-2 rounded-md hover:text-indigo-600 transition">Resumen</a>
                    <a href="#introduccion" class="nav-link px-3 py-2 rounded-md hover:text-indigo-600 transition">Introducción</a>
                    <a href="#metodologia" class="nav-link px-3 py-2 rounded-md hover:text-indigo-600 transition">Metodología</a>
                    <a href="#normativa" class="nav-link px-3 py-2 rounded-md hover:text-indigo-600 transition">Normativa</a>
                    <a href="#resultados" class="nav-link px-3 py-2 rounded-md hover:text-indigo-600 transition text-fuchsia-600">Resultados</a>
                    <a href="#conclusiones" class="nav-link px-3 py-2 rounded-md hover:text-indigo-600 transition">Conclusiones</a>
                </div>

                <!-- Status Badge -->
                <div class="hidden md:block">
                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold border border-green-200">v14.0 Stable</span>
                </div>
            </div>
            
            <!-- Mobile Horizontal Scroll Menu -->
            <div class="md:hidden flex space-x-2 overflow-x-auto pb-3 pt-1 no-scrollbar text-sm font-medium" id="mobile-menu">
                <a href="#resumen" class="nav-link flex-none px-4 py-1.5 bg-slate-100 text-slate-600 rounded-full transition">Resumen</a>
                <a href="#introduccion" class="nav-link flex-none px-4 py-1.5 bg-slate-100 text-slate-600 rounded-full transition">Intro</a>
                <a href="#metodologia" class="nav-link flex-none px-4 py-1.5 bg-slate-100 text-slate-600 rounded-full transition">Metodología</a>
                <a href="#normativa" class="nav-link flex-none px-4 py-1.5 bg-slate-100 text-slate-600 rounded-full transition">Normas</a>
                <a href="#resultados" class="nav-link flex-none px-4 py-1.5 bg-slate-100 text-slate-600 rounded-full transition text-fuchsia-600 font-bold">Resultados</a>
                <a href="#conclusiones" class="nav-link flex-none px-4 py-1.5 bg-slate-100 text-slate-600 rounded-full transition">Conclusiones</a>
            </div>
        </div>
    </nav>

    <!-- 1. TÍTULO (HERO SECTION) -->
    <header class="relative overflow-hidden bg-slate-900 pt-16 pb-24 lg:pt-32 lg:pb-40">
        <div class="absolute inset-0">
            <div class="absolute inset-0 bg-gradient-to-br from-indigo-950 via-slate-950 to-fuchsia-950 opacity-90"></div>
            <div class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 rounded-full bg-indigo-500 blur-3xl opacity-20 animate-pulse"></div>
            <div class="absolute bottom-0 left-0 -ml-20 -mb-20 w-80 h-80 rounded-full bg-cyan-500 blur-3xl opacity-20"></div>
        </div>

        <div class="container mx-auto px-6 relative z-10 text-center">
            <!-- ETIQUETA MODIFICADA -->
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-xs font-bold uppercase tracking-wider mb-6">
                Ingeniería Biomédica
            </div>
            
            <h1 class="text-5xl md:text-7xl font-extrabold text-white leading-tight mb-6">
                DidacMed <span class="text-gradient">Firmware</span>
            </h1>
            
            <p class="text-lg md:text-xl text-slate-300 max-w-2xl mx-auto mb-10 leading-relaxed">
                Diseño de software embebido para adquisición de bioseñales en tiempo real con cancelación digital de ruido (120Hz).
            </p>

            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#resultados" class="px-8 py-4 bg-white text-slate-900 rounded-full font-bold text-base hover:bg-slate-50 hover:scale-105 transition transform shadow-[0_0_20px_rgba(255,255,255,0.3)]">
                    Ver Demo Interactiva
                </a>
                <a href="#resumen" class="px-8 py-4 bg-transparent border border-white/30 text-white rounded-full font-bold text-base hover:bg-white/10 transition backdrop-blur-sm">
                    Leer Informe
                </a>
            </div>
        </div>
    </header>

    <!-- CONTENT -->
    <main class="container mx-auto px-4 -mt-10 relative z-20 space-y-20 pb-24">

        <!-- 2. RESUMEN -->
        <section id="resumen" class="glass-card rounded-3xl p-8 md:p-12 scroll-mt-32">
            <div class="flex flex-col md:flex-row gap-10 items-center">
                <div class="md:w-1/2">
                    <h3 class="text-indigo-600 font-bold uppercase text-sm tracking-wide mb-2">Resumen Ejecutivo</h3>
                    <h2 class="text-3xl font-bold text-slate-900 mb-4">Ingeniería de Precisión Accesible</h2>
                    <p class="text-slate-600 leading-relaxed mb-4 text-justify">
                        Este proyecto desarrolla un firmware para el microcontrolador ESP32 capaz de adquirir señales ECG, EMG y EEG utilizando el sensor BioAmp EXG Pill. El objetivo principal fue superar la barrera del ruido eléctrico (60Hz) sin hardware costoso.
                    </p>
                    <p class="text-slate-900 font-semibold leading-relaxed">
                        <strong>Logro Clave:</strong> Implementación de un algoritmo DSP de sincronización armónica (120Hz) que limpia la señal digitalmente, logrando calidad clínica a bajo costo.
                    </p>
                </div>
                <div class="md:w-1/2 grid grid-cols-1 gap-4">
                    <div class="bg-indigo-50 p-4 rounded-xl border-l-4 border-indigo-500 transition hover:translate-x-1">
                        <h4 class="font-bold text-indigo-900 text-sm">Problema</h4>
                        <p class="text-xs text-slate-600 mt-1">Interferencia electromagnética severa en entornos no blindados.</p>
                    </div>
                    <div class="bg-fuchsia-50 p-4 rounded-xl border-l-4 border-fuchsia-500 transition hover:translate-x-1">
                        <h4 class="font-bold text-fuchsia-900 text-sm">Solución</h4>
                        <p class="text-xs text-slate-600 mt-1">Firmware híbrido con muestreo adaptativo y transmisión BLE.</p>
                    </div>
                    <div class="bg-cyan-50 p-4 rounded-xl border-l-4 border-cyan-500 transition hover:translate-x-1">
                        <h4 class="font-bold text-cyan-900 text-sm">Impacto</h4>
                        <p class="text-xs text-slate-600 mt-1">Acceso democrático a tecnología de diagnóstico médico.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. INTRODUCCIÓN -->
        <section id="introduccion" class="scroll-mt-32">
            <div class="text-center max-w-3xl mx-auto mb-12">
                <h2 class="text-3xl font-bold text-slate-900">Introducción</h2>
                <p class="text-slate-500 mt-4">Contexto y Justificación del Proyecto</p>
            </div>
            <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-8 hover:shadow-md transition duration-300">
                <p class="text-slate-600 leading-relaxed text-justify mb-6">
                    La ingeniería biomédica moderna busca descentralizar la salud, llevando el monitoreo del hospital al hogar. Sin embargo, los equipos de grado médico son costosos y cerrados. El uso de hardware open-source (ESP32) presenta un desafío crítico: la relación señal-ruido (SNR) es pobre debido a la interferencia de la red eléctrica.
                </p>
                <p class="text-slate-600 leading-relaxed text-justify mb-6">
                    <strong>DidacMed Firmware</strong> nace como una respuesta de software a un problema de hardware. En lugar de añadir filtros analógicos caros, utilizamos matemáticas computacionales eficientes para purificar la señal en tiempo real, habilitando aplicaciones en telemedicina, educación y bienestar.
                </p>
            </div>
        </section>

        <!-- 4. METODOLOGÍA -->
        <section id="metodologia" class="scroll-mt-32">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-slate-900">Metodología y Diseño</h2>
                <span class="text-xs font-mono bg-indigo-100 text-indigo-700 px-2 py-1 rounded">Arquitectura v14</span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Flowchart -->
                <div class="bg-slate-50 p-6 rounded-2xl border border-slate-200">
                    <h4 class="text-center font-bold text-slate-700 mb-6 uppercase text-xs tracking-widest">Flujo de Datos</h4>
                    <div class="flex flex-col items-center space-y-2 max-w-xs mx-auto">
                        <div class="flow-node w-full border-l-cyan-500">
                            <strong>1. Adquisición (ADC)</strong>
                            <p class="text-xs text-slate-500">Lectura analógica (Pin 34)</p>
                        </div>
                        <div class="connector-v"></div>
                        <div class="flow-node w-full border-l-indigo-500 bg-indigo-50/50 scale-105 shadow-md">
                            <strong>2. Motor DSP (120Hz)</strong>
                            <p class="text-xs text-slate-500 font-bold">Filtro DC Block + Sync</p>
                        </div>
                        <div class="connector-v"></div>
                        <div class="flow-node w-full border-l-fuchsia-500">
                            <strong>3. Comunicación</strong>
                            <p class="text-xs text-slate-500">Bluetooth (App) + Serial (PC)</p>
                        </div>
                    </div>
                </div>

                <!-- Technical Details -->
                <div class="space-y-6">
                    <div class="glass-card p-6 rounded-xl border-l-4 border-indigo-500 group cursor-default">
                        <h4 class="font-bold text-indigo-900 group-hover:text-indigo-600 transition">Sincronización 120Hz</h4>
                        <p class="text-sm text-slate-600 mt-2">
                            Al muestrear al doble exacto de la frecuencia de ruido (60Hz), la interferencia se cancela matemáticamente, permitiendo ver la señal biológica oculta.
                        </p>
                    </div>
                    <div class="glass-card p-6 rounded-xl border-l-4 border-fuchsia-500 group cursor-default">
                        <h4 class="font-bold text-fuchsia-900 group-hover:text-fuchsia-600 transition">Estabilidad DC Blocker</h4>
                        <p class="text-sm text-slate-600 mt-2">
                            Filtro recursivo (coeficiente 0.95) que elimina el movimiento del paciente (deriva) sin distorsionar ondas lentas como la Onda T del corazón.
                        </p>
                    </div>
                    <div class="glass-card p-6 rounded-xl border-l-4 border-cyan-500 group cursor-default">
                        <h4 class="font-bold text-cyan-900 group-hover:text-cyan-600 transition">Control Híbrido</h4>
                        <p class="text-sm text-slate-600 mt-2">
                            Arquitectura de prioridad: El sistema obedece a la App móvil si está conectada, pero permite depuración vía PC si no hay enlace inalámbrico.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 5. NORMATIVA -->
        <section id="normativa" class="scroll-mt-32">
            <h2 class="text-3xl font-bold text-slate-900 mb-8">Validación Normativa</h2>
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="p-6 bg-slate-50 border-b border-slate-200">
                    <p class="text-sm text-slate-600">El diseño cumple con estándares internacionales de seguridad y calidad de software médico.</p>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <tbody class="divide-y divide-slate-100">
                            <tr class="group hover:bg-slate-50 transition">
                                <td class="px-6 py-4 font-bold text-indigo-600 whitespace-nowrap">IEC 60601-1</td>
                                <td class="px-6 py-4 text-slate-700">Seguridad Funcional y Gestión de Fallos.</td>
                            </tr>
                            <tr class="group hover:bg-slate-50 transition">
                                <td class="px-6 py-4 font-bold text-cyan-600 whitespace-nowrap">IEC 60601-2-25</td>
                                <td class="px-6 py-4 text-slate-700">Fidelidad de señal ECG (Ancho de banda y Estabilidad).</td>
                            </tr>
                            <tr class="group hover:bg-slate-50 transition">
                                <td class="px-6 py-4 font-bold text-fuchsia-600 whitespace-nowrap">IEEE 802.15.1</td>
                                <td class="px-6 py-4 text-slate-700">Estándar de transmisión inalámbrica segura (BLE).</td>
                            </tr>
                            <tr class="group hover:bg-slate-50 transition">
                                <td class="px-6 py-4 font-bold text-amber-600 whitespace-nowrap">Nyquist-Shannon</td>
                                <td class="px-6 py-4 text-slate-700">Integridad de datos (Muestreo > 2x Frecuencia Máx).</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 6. RESULTADOS (DEMO INTERACTIVA) -->
        <section id="resultados" class="scroll-mt-32">
            <div class="bg-slate-900 rounded-3xl p-6 md:p-10 shadow-2xl relative overflow-hidden">
                <!-- Background Pulse -->
                <div class="absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>
                
                <div class="relative z-10 flex flex-col md:flex-row justify-between items-end mb-8 gap-4">
                    <div>
                        <span class="text-cyan-400 font-bold tracking-wider text-xs uppercase">Prueba de Concepto</span>
                        <h2 class="text-3xl font-bold text-white mt-1">Resultados Experimentales</h2>
                        <p class="text-slate-400 text-sm mt-2">Visualiza cómo el firmware reconstruye la señal oculta en el ruido.</p>
                    </div>
                    
                    <!-- Controls -->
                    <div class="flex bg-slate-800 p-1 rounded-lg">
                        <button onclick="updateSim(false)" id="btn-raw" class="px-4 py-2 rounded-md text-xs font-bold text-slate-400 hover:text-white hover:bg-slate-700 transition">Entrada Cruda</button>
                        <button onclick="updateSim(true)" id="btn-filter" class="px-4 py-2 rounded-md text-xs font-bold bg-indigo-600 text-white shadow-lg transition">Salida Filtrada</button>
                    </div>
                </div>

                <!-- Graph -->
                <div class="w-full bg-slate-950/50 rounded-xl border border-slate-700 p-4 backdrop-blur-sm">
                    <div class="chart-container">
                        <canvas id="ecgChart"></canvas>
                    </div>
                </div>

                <!-- Metrics -->
                <div class="grid grid-cols-3 gap-4 mt-8">
                    <div class="text-center border-r border-slate-700">
                        <div class="text-2xl font-bold text-white">2.3k</div>
                        <div class="text-xs text-slate-500 uppercase">Amplitud (µV)</div>
                    </div>
                    <div class="text-center border-r border-slate-700">
                        <div class="text-2xl font-bold text-green-400">75</div>
                        <div class="text-xs text-slate-500 uppercase">BPM Estables</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-indigo-400">0.0%</div>
                        <div class="text-xs text-slate-500 uppercase">Pérdida Paquetes</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 7. CONCLUSIONES Y FUTURO -->
        <section id="conclusiones" class="scroll-mt-32 mb-12">
            <h2 class="text-3xl font-bold text-slate-900 mb-8 text-center">Conclusiones y Visión</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-gradient-to-br from-indigo-50 to-white p-8 rounded-2xl border border-indigo-100 shadow-sm hover:shadow-md transition">
                    <h3 class="font-bold text-xl text-indigo-900 mb-3">Hito Técnico</h3>
                    <p class="text-slate-600 text-sm leading-relaxed text-justify">
                        Se logró desarrollar un sistema funcional capaz de extraer señales ECG de calidad clínica utilizando componentes de bajo costo. Esto valida la hipótesis de que la ingeniería de software avanzada puede suplir las carencias del hardware económico.
                    </p>
                </div>
                <div class="bg-gradient-to-br from-fuchsia-50 to-white p-8 rounded-2xl border border-fuchsia-100 shadow-sm hover:shadow-md transition">
                    <h3 class="font-bold text-xl text-fuchsia-900 mb-3">Potencial de Mercado</h3>
                    <p class="text-slate-600 text-sm leading-relaxed text-justify">
                        La plataforma es modular y escalable. Con ajustes menores, este mismo firmware (v14) puede potenciar desde camisetas inteligentes deportivas hasta prótesis mioeléctricas o sistemas de monitoreo rural de bajo costo.
                    </p>
                </div>
            </div>

            <!-- Investor CTA (BOTÓN WHATSAPP MODIFICADO) -->
            <div class="mt-16 bg-gradient-to-r from-slate-900 to-indigo-900 text-white rounded-3xl p-10 text-center relative overflow-hidden shadow-2xl">
                <div class="relative z-10">
                    <h3 class="text-2xl md:text-3xl font-bold mb-4">¿Interesado en el Proyecto?</h3>
                    <p class="text-indigo-200 mb-8 max-w-xl mx-auto">
                        Este prototipo está listo para la fase de validación clínica y miniaturización. Buscamos socios para llevar la salud digital al siguiente nivel.
                    </p>
                    
                    <!-- ENLACE DIRECTO A WHATSAPP -->
                    <!-- Reemplaza el número 593999999999 con el tuyo real -->
                    <a href="https://wa.me/593989002712?text=Hola,%20me%20interesa%20tu%20proyecto%20DidacMed." target="_blank" class="inline-flex items-center gap-2 px-8 py-3 bg-green-500 text-white rounded-full font-bold hover:bg-green-600 transition shadow-xl transform hover:scale-105 active:scale-95">
                        <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                        Contactar al Desarrollador
                    </a>

                </div>
                <!-- Deco circle -->
                <div class="absolute -bottom-24 -right-24 w-64 h-64 bg-white opacity-5 rounded-full"></div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-slate-200 py-12 mt-12">
        <div class="container mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="text-left">
                <div class="font-bold text-slate-900 text-lg">Zahid Armijos</div>
                <div class="text-sm text-indigo-600 font-medium">Ingeniería Biomédica</div>
            </div>
            <div class="text-right text-xs text-slate-400">
                <!-- FOOTER MODIFICADO -->
                &copy; 2026 DidacMed
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // --- 1. SCROLL SPY (Menú Interactivo) ---
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');
        const mobileMenu = document.getElementById('mobile-menu');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= (sectionTop - 300)) {
                    current = section.getAttribute('id');
                }
            });

            // Update Desktop Menu
            navLinks.forEach(link => {
                link.classList.remove('active', 'text-indigo-600', 'bg-indigo-50');
                
                if (link.getAttribute('href').includes(current)) {
                    // Styles based on menu type
                    if (link.parentElement.id === 'desktop-menu') {
                        link.classList.add('active'); // Desktop line style (not needed if bg is used)
                        link.classList.add('text-indigo-600', 'bg-indigo-50');
                    } else if (link.parentElement.id === 'mobile-menu') {
                        link.classList.remove('bg-slate-100', 'text-slate-600');
                        link.classList.add('bg-indigo-600', 'text-white');
                        link.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                    }
                } else {
                     if (link.parentElement.id === 'mobile-menu') {
                        link.classList.add('bg-slate-100', 'text-slate-600');
                        link.classList.remove('bg-indigo-600', 'text-white');
                    }
                }
            });
        });

        // --- 2. ECG CHART LOGIC (Realistic Signal) ---
        const ctxECG = document.getElementById('ecgChart').getContext('2d');
        const points = 300;
        const labels = Array.from({length: points}, (_, i) => i);
        
        // Noisy Signal
        const noisyData = labels.map(i => {
            let signal = Math.sin(i * 0.05) * 150 + Math.random() * 40; 
            if (i % 80 > 30 && i % 80 < 40) signal += 80; // Buried signal
            return signal;
        });

        // Clean Signal (P-QRS-T)
        const cleanData = labels.map(i => {
            let val = 0;
            let phase = i % 80; 
            if (phase >= 10 && phase < 20) val += Math.sin((phase-10) * Math.PI / 10) * 15;
            if (phase >= 30 && phase < 32) val -= 20; 
            if (phase >= 32 && phase < 36) val += 180; 
            if (phase >= 36 && phase < 38) val -= 30; 
            if (phase >= 50 && phase < 70) val += Math.sin((phase-50) * Math.PI / 20) * 35;
            return val + Math.random() * 3; 
        });

        const ecgChart = new Chart(ctxECG, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    {
                        label: 'Entrada Cruda',
                        data: noisyData,
                        borderColor: '#64748b',
                        borderWidth: 2,
                        pointRadius: 0,
                        tension: 0.4,
                        hidden: false
                    },
                    {
                        label: 'Salida v14',
                        data: cleanData,
                        borderColor: '#06B6D4', // Cyan
                        backgroundColor: 'rgba(6, 182, 212, 0.1)',
                        borderWidth: 3,
                        pointRadius: 0,
                        tension: 0.3,
                        hidden: true,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: { duration: 800 },
                scales: { x: { display: false }, y: { display: false, min: -100, max: 250 } },
                plugins: { legend: { display: false }, tooltip: { enabled: false } }
            }
        });

        function updateSim(isClean) {
            const btnRaw = document.getElementById('btn-raw');
            const btnFilter = document.getElementById('btn-filter');

            if (isClean) {
                ecgChart.data.datasets[0].borderColor = 'rgba(100, 116, 139, 0.1)';
                ecgChart.data.datasets[1].hidden = false;
                
                btnFilter.classList.add('bg-indigo-600', 'text-white', 'shadow-lg');
                btnFilter.classList.remove('text-slate-400', 'hover:bg-slate-700');
                btnRaw.classList.remove('bg-indigo-600', 'text-white', 'shadow-lg');
                btnRaw.classList.add('text-slate-400', 'hover:bg-slate-700', 'hover:text-white');
            } else {
                ecgChart.data.datasets[0].borderColor = '#64748b';
                ecgChart.data.datasets[1].hidden = true;

                btnRaw.classList.add('bg-indigo-600', 'text-white', 'shadow-lg');
                btnRaw.classList.remove('text-slate-400', 'hover:bg-slate-700');
                btnFilter.classList.remove('bg-indigo-600', 'text-white', 'shadow-lg');
                btnFilter.classList.add('text-slate-400', 'hover:bg-slate-700', 'hover:text-white');
            }
            ecgChart.update();
        }
        
        setTimeout(() => updateSim(true), 1000);
    </script>
</body>
</html>